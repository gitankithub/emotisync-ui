<div class="dashboard" [class.split-view]="selectedRequest">
  <div class="left-panel">
    <div class="top-bar">
      <h2>Open Requests</h2>
      <div *ngIf="role === 'guest'">
        <button mat-raised-button (click)="loadRequests()">Refresh</button>
      </div>
    </div>

    <div class="request-list">
      <mat-card *ngFor="let req of requests" (click)="selectRequest(req)" [class.active]="req.requestId === selectedRequest?.requestId" class="req-card">
        <div class="req-content">
          <div>
            <div class="req-id">{{ req.requestId }}</div>
            <div class="req-type">{{ req.requestType }}</div>
          </div>
          <div class="req-room">Room: {{ req.roomNumber }}</div>
        </div>
      </mat-card>

      <p *ngIf="!requests.length" class="no-data">No open requests yet.</p>
    </div>
  </div>

  <div class="right-panel" *ngIf="selectedRequest">
    <app-chat
      [request]="selectedRequest"
      [threadId]="getThreadId(selectedRequest)"
      [username]="userId"
      [role]="role"
      (closeChat)="closeChat()"
    ></app-chat>
  </div>
</div>
