<div class="dashboard" [class.split-view]="selectedRequest">

  <!-- LEFT PANEL: Requests List -->
  <div class="left-panel">
    <div class="top-bar">
      <h2 class="title"><mat-icon>pending_actions</mat-icon> Open Requests</h2>
      <div class="action-bar">
      <button
        *ngIf="role === 'guest'"
        mat-raised-button
        (click)="newRequest()"
        style="left: 28%;"
      >
        New Request
      </button>
      <button class="home" (click)="redirectToHome()"><mat-icon>home</mat-icon></button>
      </div>
    </div>

    <div class="request-list">
      <mat-card
        *ngFor="let req of requests"
        (click)="selectRequest(req)"
        [class.active]="req.requestId === selectedRequest?.requestId"
        class="req-card"
      >
        <div class="req-content">
          <div class="req-id">{{ req.requestId }}</div>
          <div class="req-type">{{ req.requestType }}</div>
          <div class="req-room">Room: {{ req.roomNumber }}</div>
        </div>
      </mat-card>

      <p *ngIf="!requests.length" class="no-data">No open requests yet.</p>
    </div>
  </div>

  <!-- RIGHT PANEL: Chat -->
  <div class="right-panel" *ngIf="selectedRequest">
    <app-chat
      [request]="selectedRequest"
      [threadId]="getThreadId(selectedRequest)"
      [username]="userId"
      [role]="role"
      (closeChat)="closeChat()"
    ></app-chat>
  </div>

</div>
